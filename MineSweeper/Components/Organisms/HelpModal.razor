@using MineSweeper.Components.Atoms
@using MineSweeper.Components.Molecules

<Modal IsVisible="@IsVisible"
       OnClose="@OnClose"
       Title="How to Play Minesweeper"
       Icon="ðŸ“–"
       Size="Modal.ModalSize.Large">
    <Stack Direction="Stack.StackDirection.Column" Gap="Stack.StackGap.ExtraLarge" Class="text-gray-300">
        <section>
            <SectionHeader Icon="ðŸŽ¯" Title="Objective" Size="SectionHeader.HeaderSize.Medium" />
            <p class="leading-relaxed">
                Clear all the safe cells without clicking on any mines. Use logic and the number clues to deduce where mines are hidden.
            </p>
        </section>
                    
        <section>
            <SectionHeader Icon="ðŸŽ®" Title="Controls" Size="SectionHeader.HeaderSize.Medium" />
            <Stack Direction="Stack.StackDirection.Column" Gap="Stack.StackGap.Medium">
                <Card Variant="CardVariant.Secondary" Padding="CardPadding.Small">
                    <Stack Direction="Stack.StackDirection.Row" Align="Stack.StackAlign.Start" Gap="Stack.StackGap.Medium">
                        <span class="text-blue-400 font-mono whitespace-nowrap">Left Click</span>
                        <span>Reveal a cell. If it's a mine, game over!</span>
                    </Stack>
                </Card>
                <Card Variant="CardVariant.Secondary" Padding="CardPadding.Small">
                    <Stack Direction="Stack.StackDirection.Row" Align="Stack.StackAlign.Start" Gap="Stack.StackGap.Medium">
                        <span class="text-blue-400 font-mono whitespace-nowrap">Right Click</span>
                        <span>Place or remove a flag to mark suspected mines</span>
                    </Stack>
                </Card>
                <Card Variant="CardVariant.Secondary" Padding="CardPadding.Small">
                    <Stack Direction="Stack.StackDirection.Row" Align="Stack.StackAlign.Start" Gap="Stack.StackGap.Medium">
                        <span class="text-blue-400 font-mono whitespace-nowrap">Double Click</span>
                        <span>Quick-reveal adjacent cells if the correct number of flags are placed</span>
                    </Stack>
                </Card>
            </Stack>
        </section>
                    
        <section>
            <SectionHeader Icon="ðŸ”¢" Title="Understanding Numbers" Size="SectionHeader.HeaderSize.Medium" />
            <p class="mb-3">Each number tells you how many mines are in the 8 adjacent cells:</p>
            <Grid Columns="4" Gap="Grid.GridGap.Small">
                @for (int i = 1; i <= 8; i++)
                {
                    <Card Variant="CardVariant.Secondary" Padding="CardPadding.Small" Class="text-center">
                        <span class="text-2xl font-bold @GetNumberColorClass(i)">@i</span>
                        <p class="text-xs mt-1">@i @(i == 1 ? "mine" : "mines")</p>
                    </Card>
                }
            </Grid>
        </section>
                    
        <section>
            <SectionHeader Icon="ðŸ’¡" Title="Pro Tips" Size="SectionHeader.HeaderSize.Medium" />
            <Stack Direction="Stack.StackDirection.Column" Gap="Stack.StackGap.Small">
                <Stack Direction="Stack.StackDirection.Row" Align="Stack.StackAlign.Start" Gap="Stack.StackGap.Small">
                    <span class="text-green-400">â€¢</span>
                    <span>Your first click is always safe - mines are placed after</span>
                </Stack>
                <Stack Direction="Stack.StackDirection.Row" Align="Stack.StackAlign.Start" Gap="Stack.StackGap.Small">
                    <span class="text-green-400">â€¢</span>
                    <span>Start with corners and edges - they have fewer adjacent cells</span>
                </Stack>
                <Stack Direction="Stack.StackDirection.Row" Align="Stack.StackAlign.Start" Gap="Stack.StackGap.Small">
                    <span class="text-green-400">â€¢</span>
                    <span>If a number equals the unflagged cells around it, they're all mines</span>
                </Stack>
                <Stack Direction="Stack.StackDirection.Row" Align="Stack.StackAlign.Start" Gap="Stack.StackGap.Small">
                    <span class="text-green-400">â€¢</span>
                    <span>If a number equals the flags around it, other cells are safe</span>
                </Stack>
            </Stack>
        </section>
    </Stack>
</Modal>

@code {
    [Parameter] public bool IsVisible { get; set; }
    [Parameter] public EventCallback OnClose { get; set; }

    private string GetNumberColorClass(int number)
    {
        return number switch
        {
            1 => "text-blue-400",
            2 => "text-green-400",
            3 => "text-red-400",
            4 => "text-purple-400",
            5 => "text-yellow-400",
            6 => "text-pink-400",
            7 => "text-gray-300",
            8 => "text-gray-100",
            _ => "text-gray-400"
        };
    }
}