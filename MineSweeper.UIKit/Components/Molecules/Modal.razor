@namespace MineSweeper.Components.Molecules

@if (IsVisible)
{
    <div class="modal-overlay"
         @onclick="HandleOverlayClick">
        <div class="modal-content @(_isClosing ? "scale-95 opacity-0" : "scale-100 opacity-100") @GetSizeClass()"
             @onclick:stopPropagation="true"
             @attributes="AdditionalAttributes">
            @if (ShowHeader)
            {
                <div class="@GetHeaderClasses()">
                    <Stack Direction="Stack.StackDirection.Row" Justify="Stack.StackJustify.Between" Align="Stack.StackAlign.Center">
                        @if (HeaderContent != null)
                        {
                            @HeaderContent
                        }
                        else if (!string.IsNullOrWhiteSpace(Title))
                        {
                            <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                                @if (!string.IsNullOrWhiteSpace(Icon))
                                {
                                    <span>@Icon</span>
                                }
                                @Title
                            </h2>
                        }
                        @if (Dismissible)
                        {
                            <Button OnClick="Close"
                                    Variant="ButtonVariant.Icon"
                                    AriaLabel="Close modal">
                                <span class="text-2xl">âœ•</span>
                            </Button>
                        }
                    </Stack>
                </div>
            }

            <div class="@GetBodyClasses()">
                @ChildContent
            </div>

            @if (FooterContent != null)
            {
                <div class="@GetFooterClasses()">
                    @FooterContent
                </div>
            }
        </div>
    </div>
}